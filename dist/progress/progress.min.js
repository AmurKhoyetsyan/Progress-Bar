/*********************************************
*
*   Create by Amur
*	Progress Bar And Other Opportunities
*
*********************************************/

"use strict";class GeterSeterParameters{constructor(t){this.elem=t}get Height(){return parseFloat(this.elem.clientHeight)}set Height(t){"number"!=typeof t||isNaN(t)?"string"==typeof t&&(this.elem.style.height=t):this.elem.style.height=t+"px"}get Width(){return parseFloat(this.elem.clientWidth)}set Width(t){"number"!=typeof t||isNaN(t)?"string"==typeof t&&(this.elem.style.width=t):this.elem.style.width=t+"px"}}class SetOptions{_getOptions(t,e){if(t)for(let s in t)e[s]=t[s]}_replaceAll(t,e,s){return t.split(e).join(s)}_setPercent(t,e){let s,i=this._replaceAll(e.progressCount,",",".");return isNaN(parseFloat(e.progressCount))||parseFloat(e.progressCount).toFixed(2)<=t&&(s=(100-100*parseFloat(i).toFixed(2)/t).toFixed(2)),s}}class Animation extends SetOptions{_animatedText(t,e,s,i){let r=0,l=t/e*20;const o=(t,e)=>{let s=Math.ceil(t)>t?parseFloat(parseFloat(t).toFixed(2)):parseInt(t);return e?s+"%":s},n=()=>{(r+=l)>=t?s.innerHTML=o(t,i):(s.innerHTML=o(r,i),setTimeout(n,20))};n()}_animatedCircle(t,e,s,i){let r=t,l=Math.abs(e-t)/s*20;i.setAttribute("stroke-dashoffset",r);const o=()=>{(r-=l)<=e?i.setAttribute("stroke-dashoffset",e):(i.setAttribute("stroke-dashoffset",r),setTimeout(o,20))};o()}}class CreateSvg extends Animation{_setText(t,e,s,i){let r,l=this._replaceAll(e.progressCount,",","."),o=document.createElementNS("http://www.w3.org/2000/svg","text");return o.setAttribute("fill",e.fontColor),o.setAttribute("x","50%"),o.setAttribute("y","50%"),o.setAttribute("font-size",e.fontSize),o.setAttribute("font-weight",e.fontWeight),o.setAttribute("alignment-baseline","middle"),o.setAttribute("text-anchor","middle"),o.setAttribute("transform","rotate(90,"+i+","+i+")"),isNaN(parseFloat(l))||parseFloat(l).toFixed(2)<=t&&(r=parseFloat(l).toFixed(2),e.animated?o.innerHTML=0:o.innerHTML=s?r+"%":r),e.animated&&this._animatedText(r,e.interval,o,s),o}_setCircle(t,e,s,i,r){let l=document.createElementNS("http://www.w3.org/2000/svg","circle");return l.setAttribute("fill",t),l.setAttribute("stroke",e),l.setAttribute("cx",r),l.setAttribute("cy",r),l.setAttribute("r",i),l.setAttribute("stroke-width",s),l}_setSvg(t,e,s,i){let r=new GeterSeterParameters(t),l=this._setPercent(s,e),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=r.Width/2,a=n-e.strokeWidthChild/2,h=2*Math.PI*a,d=h*l/100;o.setAttribute("height",r.Width),o.setAttribute("width",r.Width),o.setAttribute("transform","rotate(270)"),o.setAttribute("viewbox","0 0 "+r.Width+" "+r.Width);let p=this._setCircle(e.fillParent,e.progressParentCircleColor,e.strokeWidthParent,a,n),u=this._setCircle(e.fillChild,e.progressColor,e.strokeWidthChild,a,n),g=this._setText(s,e,i,n);return e.animated?this._animatedCircle(h,d,e.interval,u):u.setAttribute("stroke-dashoffset",d),u.setAttribute("stroke-dasharray",h),o.appendChild(p),o.appendChild(u),o.appendChild(g),o}}class Progress extends CreateSvg{constructor(t,e=null){super(),this.elem=t,this.options=e,this.defaultOptions={fontColor:"#000000",fontSize:16,fontWeight:400,fillParent:"none",fillChild:"none",interval:1e3,animated:!1,strokeWidthParent:3,strokeWidthChild:5,progressColor:"#00AAFF",progressParentCircleColor:"#E0E0E0"}}inPercent(){if(this.elem)for(let t=0;t<this.elem.length;t++){let e={progressCount:this.elem[t].getAttribute("data-count")||null};this._getOptions(this.defaultOptions,e),this._getOptions(this.options,e);let s=this._setSvg(this.elem[t],e,100,!0);this.elem[t].append(s)}}inCounter(){if(this.elem)for(let t=0;t<this.elem.length;t++){let e={progressCount:this.elem[t].getAttribute("data-count")||null};this._getOptions(this.defaultOptions,e),this._getOptions(this.options,e);let s=this._setSvg(this.elem[t],e,parseFloat(e.progressCount),!1);this.elem[t].append(s)}}inCount(t){if(this.elem)for(let e=0;e<this.elem.length;e++){let s={progressCount:this.elem[e].getAttribute("data-count")||null};this._getOptions(this.defaultOptions,s),this._getOptions(this.options,s);let i=this._setSvg(this.elem[e],s,t,!1);this.elem[e].append(i)}}}