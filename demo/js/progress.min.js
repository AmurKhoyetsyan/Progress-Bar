/***********************************************************
*
*   Create by Amur
*   Progress Bar And Other Opportunities
*   Github https://github.com/AmurKhoyetsyan/Progress-Bar
*
************************************************************/

"use strict";class GetterSetterParameters{constructor(t){this.elem=t}get Height(){if(this.elem)return parseFloat(this.elem.clientHeight)}set Height(t){this.elem&&("number"!=typeof t||isNaN(t)?"string"==typeof t&&(this.elem.style.height=t):this.elem.style.height=t+"px")}get Width(){if(this.elem)return parseFloat(this.elem.clientWidth)}set Width(t){this.elem&&("number"!=typeof t||isNaN(t)?"string"==typeof t&&(this.elem.style.width=t):this.elem.style.width=t+"px")}replaceAll(t,e,i){return t.split(e).join(i)}getCoefficient(t,e){return t>e?t/2>e?{parent:0,child:t/2-e}:{parent:0,child:0}:t<e&&e/2>t?{parent:e/2-t,child:0}:{parent:0,child:0}}getBrowser(){return function(t){switch(!0){case t.indexOf("edge")>-1:return"edge";case t.indexOf("opr")>-1&&!!window.opr:return"opera";case t.indexOf("chrome")>-1&&!!window.chrome:return"chrome";case t.indexOf("trident")>-1:return"ie";case t.indexOf("firefox")>-1:return"firefox";case t.indexOf("safari")>-1:return"safari";default:return"other"}}(window.navigator.userAgent.toLowerCase())}}class AnimateType{EaseOut(t,e,i,r,s){var n;!function({timing:t,draw:e,duration:i}){let r=performance.now();requestAnimationFrame(function s(n){let a=(n-r)/i;a>1&&(a=1);let o=t(a);e(o),a<1&&requestAnimationFrame(s)})}({duration:e,timing:(n=function(t){for(let e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(i,2)},function(t){return 1-n(1-t)}),draw:function(e){i<=r?t.setAttribute("stroke-dashoffset",e*r):(t.setAttribute("stroke-dashoffset",i),i-=s)}})}Linear(t,e,i,r,s){const n=()=>{(i-=s)<=r?t.setAttribute("stroke-dashoffset",r):(t.setAttribute("stroke-dashoffset",i),setTimeout(n,e))};n()}}class SetOptions{_getOptions(t,e){if(t)for(let i in t)e[i]=t[i]}_setPercent(t,e){let i,r=(new GetterSetterParameters).replaceAll(e.progressCount,",",".");return isNaN(parseFloat(e.progressCount))||parseFloat(e.progressCount).toFixed(2)<=t&&(i=(100-100*parseFloat(r).toFixed(2)/t).toFixed(2)),i}}class Animation extends SetOptions{constructor(){super(),this.state={time:1e3/24}}_animatedText(t,e,i,r){let s=0,n=t/e*this.state.time;const a=(t,e)=>{let i=Math.ceil(t)>t?parseFloat(parseFloat(t).toFixed(2)):parseInt(t);return e?i+"%":i},o=()=>{(s+=n)>=t?i.innerHTML=a(t,r):(i.innerHTML=a(s,r),setTimeout(o,this.state.time))};o()}_animatedCircle(t,e,i,r,s){let n=t,a=Math.abs(e-t)/i*this.state.time;switch(r.setAttribute("stroke-dashoffset",n),s){case"linear":(new AnimateType).Linear(r,this.state.time,n,e,a);break;case"easeOut":(new AnimateType).EaseOut(r,i,n,e,a)}}_animateTriangleAndCubic(t,e,i,r,s){let n=t,a=Math.abs(e-t)/i*this.state.time;switch(s){case"linear":(new AnimateType).Linear(r,this.state.time,n,e,a);break;case"easeOut":(new AnimateType).EaseOut(r,i,n,e,a)}}}class CreateSvg extends Animation{_setText(t,e,i,r){let s,n=(new GetterSetterParameters).replaceAll(e.progressCount,",","."),a=document.createElementNS("http://www.w3.org/2000/svg","text");return a.setAttribute("fill",e.fontColor),a.setAttribute("x","50%"),a.setAttribute("font-size",e.fontSize),a.setAttribute("font-weight",e.fontWeight),a.setAttribute("alignment-baseline","middle"),a.setAttribute("text-anchor","middle"),"circle"===e.type&&a.setAttribute("transform","rotate(90,"+r+","+r+")"),"triangle"===e.type?a.setAttribute("y","70%"):a.setAttribute("y","50%"),isNaN(parseFloat(n))||parseFloat(n).toFixed(2)<=t&&(s=parseFloat(n).toFixed(2),e.animated?a.innerHTML=0:a.innerHTML=i?s+"%":s),e.animated&&this._animatedText(s,e.interval,a,i),a}_setCircle(t,e,i,r,s){let n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("fill",t),n.setAttribute("stroke",e),n.setAttribute("cx",s),n.setAttribute("cy",s),n.setAttribute("r",r),n.setAttribute("stroke-width",i),n.setAttribute("stroke-linecap","round"),n}_setTriangle(t,e,i,r,s,n){let a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",`M ${r/2}, ${n-s/2} L ${r-(n-s/2)}, ${r-(n-s/2)} L ${n-s/2}, ${r-(n-s/2)} L ${r/2}, ${n-s/2} Z`),a.setAttribute("fill",t),a.setAttribute("stroke",e),a.setAttribute("stroke-width",i),a.setAttribute("stroke-linecap","round"),a}_setCubic(t,e,i,r,s,n){let a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",`M ${n-s/2}, ${n-s/2} L ${r-(n-s/2)}, ${n-s/2} L ${r-(n-s/2)}, ${r-(n-s/2)} L ${n-s/2}, ${r-(n-s/2)} L ${n-s/2}, ${n-s/2} Z`),a.setAttribute("fill",t),a.setAttribute("stroke",e),a.setAttribute("stroke-width",i),a.setAttribute("stroke-linecap","square"),a}_setSvg(t,e,i,r){let s,n,a,o,l=new GetterSetterParameters(t),h=this._setPercent(i,e),u=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=(new GetterSetterParameters).getCoefficient(e.strokeWidthParent,e.strokeWidthChild),p=Math.max(e.strokeWidthParent,e.strokeWidthChild);switch(u.setAttribute("height",l.Width),u.setAttribute("width",l.Width),u.setAttribute("viewBox",`0 0 ${l.Width} ${l.Width}`),e.type){case"circle":let t=(n=l.Width/2)-e.strokeWidthChild/2,i=2*Math.PI*t,r=i*h/100;u.setAttribute("transform","rotate(270)"),a=this._setCircle(e.fillParent,e.progressParentColor,e.strokeWidthParent,t,n),(o=this._setCircle(e.fillChild,e.progressColor,e.strokeWidthChild,t,n)).setAttribute("stroke-dasharray",i),e.animated?this._animatedCircle(i,r,e.interval,o,e.animationType):o.setAttribute("stroke-dashoffset",r);break;case"triangle":let c=(n=l.Width)-2*(p-d.child/2),m=Math.sqrt(Math.pow(c,2)+Math.pow(c/2,2)),f=m+m+c;s=f*h/100,a=this._setTriangle(e.fillParent,e.progressParentColor,e.strokeWidthParent,n,d.parent,p),(o=this._setTriangle(e.fillChild,e.progressColor,e.strokeWidthChild,n,d.child,p)).setAttribute("stroke-dasharray",`${f} , ${f}`),e.animated?this._animateTriangleAndCubic(f,s,e.interval,o,e.animationType):o.setAttribute("stroke-dashoffset",s);break;case"cubic":let g=4*((n=l.Width)-2*(p-d.child/2));s=g*h/100,a=this._setCubic(e.fillParent,e.progressParentColor,e.strokeWidthParent,n,d.parent,p),(o=this._setCubic(e.fillChild,e.progressColor,e.strokeWidthChild,n,d.child,p)).setAttribute("stroke-dasharray",`${g} , ${g}`),e.animated?this._animateTriangleAndCubic(g,s,e.interval,o,e.animationType):o.setAttribute("stroke-dashoffset",s);break;default:console.log("%c%s","color: red; font-size: 32px; font-weight: 700; text-transform: uppercase;","type not found")}try{if(u.appendChild(a),u.appendChild(o),e.text){let t=this._setText(i,e,r,n);u.appendChild(t)}}catch(t){console.log("%c%s","color: red; font-size: 32px; font-weight: 700; text-transform: uppercase;","ERROR VALIDATE",t)}return u}}class Progress extends CreateSvg{constructor(t,e=null){super(),this.elem=t,this.options=e,this.defaultOptions={animationType:"linear",type:"circle",text:!0,fontColor:"#000000",fontSize:16,fontWeight:400,fillParent:"none",fillChild:"none",interval:1e3,animated:!1,strokeWidthParent:3,strokeWidthChild:5,progressColor:"#00AAFF",progressParentColor:"#E0E0E0"}}inPercent(){if(this.elem)for(let t=0;t<this.elem.length;t++){let e={progressCount:this.elem[t].getAttribute("data-count")||null};this._getOptions(this.defaultOptions,e),this._getOptions(this.options,e);let i=this._setSvg(this.elem[t],e,100,!0);this.elem[t].append(i)}}inCounter(){if(this.elem)for(let t=0;t<this.elem.length;t++){let e={progressCount:this.elem[t].getAttribute("data-count")||null};this._getOptions(this.defaultOptions,e),this._getOptions(this.options,e);let i=this._setSvg(this.elem[t],e,parseFloat(e.progressCount),!1);this.elem[t].append(i)}}inCount(t){if(this.elem)for(let e=0;e<this.elem.length;e++){let i={progressCount:this.elem[e].getAttribute("data-count")||null};this._getOptions(this.defaultOptions,i),this._getOptions(this.options,i);let r=this._setSvg(this.elem[e],i,t,!1);this.elem[e].append(r)}}}